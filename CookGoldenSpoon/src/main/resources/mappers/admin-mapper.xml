<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<!-- 연결할 인터페이스의 패키지명.인터페이스명을 작성 -->
<mapper namespace="com.m1k.goldenSpoon.admin.model.mapper.AdminMapper">
	
	<select id="selectListCount">
		
		SELECT COUNT(*) FROM "MEMBER"
		WHERE MEMBER_DEL_FL = 'N'
		
	</select>
	
	<select id="searchListCount">
		
		SELECT COUNT(*) FROM "MEMBER"
		WHERE MEMBER_DEL_FL = 'N'
		<if test="memberNickname != null">
			AND MEMBER_NICKNAME LIKE '%${memberNickname}%'
		</if>
		<if test="memberEmail != null">
			AND MEMBER_EMAIL LIKE '%${memberEmail}%'
		</if>
		<if test="memberEmail != null">
			AND MEMBER_ID LIKE '%${memberId}%'
		</if>
		
	</select>
	
	<!-- 회원 전체 조회 -->
	<select id="selectMember" resultType="Member">
		
		SELECT MEMBER_NO ,MEMBER_EMAIL ,MEMBER_NICKNAME ,MEMBER_AUTHORITY, MEMBER_ID
		FROM "MEMBER"
		WHERE MEMBER_DEL_FL = 'N'
		ORDER BY MEMBER_NO
		
	</select>
	
	<!-- 회원 검색 조회 -->
	<select id="searchMember" resultType="Member">
		
		SELECT MEMBER_NO ,MEMBER_EMAIL ,MEMBER_NICKNAME ,MEMBER_AUTHORITY, MEMBER_ID
		FROM "MEMBER"
		WHERE MEMBER_DEL_FL = 'N'
		<if test="memberNickname != null">
			AND MEMBER_NICKNAME LIKE '%${memberNickname}%'
		</if>
		<if test="memberEmail != null">
			AND MEMBER_EMAIL LIKE '%${memberEmail}%'
		</if>
		<if test="memberEmail != null">
			AND MEMBER_ID LIKE '%${memberId}%'
		</if>
		ORDER BY MEMBER_NO
		
	</select>
	
	<update id="changeAuthority">
		UPDATE "MEMBER" SET 
		MEMBER_AUTHORITY = #{memberAuthority}
		WHERE MEMBER_NO = #{memberNo}
	</update>

</mapper>